%---------------------------------------------------------------------%
%                     Define header and footer                        %
%---------------------------------------------------------------------%
%
% Dropped fancy plain as it is essentially included in memoir already.
% So we selectively reuse some settings.
%
%\pagestyle{fancyplain}
\addtolength{\headwidth}{0.5\marginparwidth}
\renewcommand{\chaptermark}[1]{\markboth{\textit{#1}}{}}
\renewcommand{\sectionmark}[1]{\markright{\textit{\thesection{} #1}}}

% instead, use memoirs ruled style:
\pagestyle{ruled}

%---------------------------------------------------------------------%
%                     Chapter headings                                %    
%---------------------------------------------------------------------%
\renewcommand{\printchaptertitle}[1]{\raggedleft{\textbf{\Huge{#1}}}}

\renewcommand{\printchapternonum}{%
  \raggedleft\phantom{\textbf{\Huge{Chapter}}}\vskip 5pt
  \vskip\onelineskip\hrule\vskip\onelineskip
}

\renewcommand{\afterchapternum}{\vskip\onelineskip\hrule\vskip\onelineskip}%

%---------------------------------------------------------------------%
%                     Define new variables                            %    
%---------------------------------------------------------------------%

\gdef\theauthor{\@author}
\gdef\@chair{Prof. Dr. A. van Deursen, Faculty EEMCS, TU Delft}
\gdef\@supervisor{Dr. E. Visser, Faculty EEMCS, TU Delft}
\gdef\@colophon{\copyright 2009 \theauthor. All rights reserved.}

\gdef\@subtitle{sottotitolo}
\gdef\@authoremail{please define authoremail}
\gdef\@university{please define university}
\gdef\@birthplace{AtessaCH}
\gdef\@studentid{please define studentid}

\def\chair#1{\gdef\@chair{#1}}
\def\supervisor#1{\gdef\@supervisor{#1}}
\def\externalsupervisor#1{\gdef\@externalsupervisor{#1}\external@supervisortrue}
\def\committeemember#1{\gdef\@committeemember{#1}\committee@membertrue}

\def\subtitle#1{\gdef\@subtitle{#1}}
\def\authoremail#1{\gdef\@authoremail{#1}}
\def\university#1{\gdef\@university{#1}}
\def\company#1{\gdef\@company{#1}\company@definedtrue}
\def\birthplace#1{\gdef\@birthplace{#1}}
\def\studentid#1{\gdef\@studentid{#1}}

\def\colophon#1{\gdef\@colophon{#1}}

\def\coverpicture#1{\gdef\@coverpicture{#1}\cover@picturetrue}

% New if construct:             Default condition:
\newif\ifcover@picture          \cover@picturefalse
\newif\ifexternal@supervisor    \external@supervisorfalse
\newif\ifcommittee@member       \committee@memberfalse
\newif\ifcompany@defined        \company@definedfalse

\university{%
\hskip-10pt{\includegraphics[height=2cm]{img/TUD_logo_color.pdf}}\\[-8pt]
Tribler Research Group\\
Parallel and Distributed Systems Group\\
Department of Software Technology \\
Faculty EEMCS, Delft University of Technology \\
Delft, the Netherlands \\
\url{www.pds.ewi.tudelft.nl}
}

%---------------------------------------------------------------------%
%                     Title page                                      %    
%---------------------------------------------------------------------%

%-------------------------------------------------------------------%
%                       Formal Title Pages                          %
%-------------------------------------------------------------------%
\def\@REPTYPE{MASTER OF SCIENCE}
\def\@MAJOR{COMPUTER SCIENCE}

\def\makeformaltitlepages#1{%
\begingroup\newpage
\thispagestyle{empty}%\setcounter{page}{1}
\let\footnotesize\small \let\footnoterule\relax
%\null
\noindent\rule{\textwidth}{1.5pt}
\vskip 1em
\begin{center}

{\Huge \@title \par}

\vskip 1em
\rule{\textwidth}{1.5pt} \par \nobreak

\vfill
\ifcompany@defined 
  \end{center}
  \begin{tabular}{@{}l@{}r@{}}
    \begin{minipage}[b]{.54\textwidth}\@university\end{minipage} & 
    \begin{minipage}[b]{.46\textwidth}\flushright\@company\end{minipage}
  \end{tabular}
\else
  \@university
  \end{center}
\fi
\newpage
\thispagestyle{empty}
\mbox{}
\vfill

\cleardoublepage
\thispagestyle{empty}
\noindent\rule{\textwidth}{1.5pt}
\begin{center}
  {\Huge \@title \par}
\end{center}
\noindent\rule{\textwidth}{1.5pt}
\vskip 3em

\noindent\begin{tabular}{@{}ll@{}}
\\

\end{tabular}
\vskip 3em

\begin{abstract}#1\end{abstract}

\vfill

\cleardoublepage\endgroup
}

%-------------------------------------------------%
% Frontespizio
%-------------------------------------------%
\def\makefrontespizio{%
\begingroup\newpage
\thispagestyle{empty}

\noindent
\vskip 1em
\begin{center}

{\fontsize{17pt}{1pt} \textsc{Alma Mater Studiorum - Universit\`{a} di Bologna}}
\rule{\textwidth}{1pt} \par \nobreak
\vskip 2em
{\Large \textsc{Facolt\`{a} di Ingegneria} \par}
{\Large \textsc{Tesi di Laurea Specialistica in Ingegneria Informatica} \par}
\vskip 1em

\vskip 5em
{\Huge \textsc{Ricerca e Raccomandazioni\\di Articoli Scientifici\\in Reti Peer-to-Peer} \par}

\vfill

\begin{flushleft}
{\large Leonardo D'Alonzo }
\end{flushleft}

\begin{flushright}
 {\large \textsc{Relatore}}
\par
 {\large Chiar.mo Prof. Ing. Paolo Ciaccia}
\vskip 0.7em
 {\large \textsc{Correlatori}}\\
{\large Dr. ir. Johan Pouwelse}\\ 
{\large Dr. David Hales}\\
{\large Dr. Tam\'{a}s Vink\'{o}}\\
\end{flushright}

\vfill 

{\large \textsc{Anno Accademico $2008/2009$}}
\cleardoublepage\endgroup
}
